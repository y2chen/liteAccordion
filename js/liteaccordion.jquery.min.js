/*************************************************!
*
*   project:    liteAccordion - a horizontal accordion plugin for jQuery
*   author:     Nicola Hibbert
*   url:        http://nicolahibbert.com/liteaccordion-v2/
*   demo:       http://www.nicolahibbert.com/demo/liteAccordion/
*
*   Version:    2.2.0
*   Copyright:  (c) 2010-2013 Nicola Hibbert
*   Licence:    MIT
*
*   Modified:   2014/01/13 by Yong Chen
*   Changes:    Don't rotate if IE8 due to header hover issues
*               Add IE8 image replacement for headers
*               Add public functions to activate/deactivate slides, go to slide
**************************************************/

;(function(b){var a=function(h,m){var j={containerWidth:960,containerHeight:320,headerWidth:48,headerSelector:"h2",activateOn:"click",firstSlide:1,slideSpeed:800,onTriggerSlide:function(n){},onSlideAnimComplete:function(){},autoPlay:false,pauseOnHover:false,cycleSpeed:6000,easing:"swing",theme:"basic",rounded:false,enumerateSlides:false,linkable:false,useIE8Images:false,imagePath:undefined,imagePrefix:undefined,imageType:undefined,imageAlts:[]},i=b.extend({},j,m),c=h.children("ol").children("li"),k=c.children(":first-child"),l=c.length,g=i.containerWidth-l*i.headerWidth,f=false,e={play:function(n){var o=d.nextSlide(n&&n);if(d.playing){return}d.playing=setInterval(function(){k.eq(o()).trigger("click.liteAccordion")},i.cycleSpeed)},stop:function(){clearInterval(d.playing);d.playing=0},next:function(){e.stop();k.eq(d.currentSlide===l-1?0:d.currentSlide+1).trigger("click.liteAccordion")},prev:function(){e.stop();k.eq(d.currentSlide-1).trigger("click.liteAccordion")},gotoslide:function(n){e.stop();k.eq(n-1).trigger("click.liteAccordion")},activate:function(n){if(b.isArray(n)){for(var p=0,o=n.length;p<o;p++){d.bindEvents(n[p]-1)}}else{d.bindEvents(n-1)}},deactivate:function(n){if(b.isArray(n)){for(var p=0,o=n.length;p<o;p++){d.unbindEvents(n[p]-1)}}else{d.unbindEvents(n-1)}},destroy:function(){e.stop();b(window).off(".liteAccordion");h.attr("style","").removeClass("liteAccordion basic dark light stitch").removeData("liteAccordion").off(".liteAccordion").find("li > :first-child").off(".liteAccordion").filter(".selected").removeClass("selected").end().find("b").remove();c.removeClass("slide").children().attr("style","")},debug:function(){return{elem:h,defaults:j,settings:i,methods:e,core:d}}},d={setStyles:function(){h.width(i.containerWidth).height(i.containerHeight).addClass("liteAccordion").addClass(i.rounded&&"rounded").addClass(i.theme);var n=c.addClass("slide").children(":first-child");if(!f){n.height(i.headerWidth)}else{n.width(i.headerWidth)}d.setSlidePositions()},setSlidePositions:function(){var n=k.filter(".selected");if(!n.length){k.eq(i.firstSlide-1).addClass("selected")}k.each(function(o){var r=b(this),q=o*i.headerWidth,p=k.first().next(),s=parseInt(p.css("marginLeft"),10)||parseInt(p.css("marginRight"),10)||0;if(n.length){if(o>k.index(n)){q+=g}}else{if(o>=i.firstSlide){q+=g}}if(!f){r.width(i.containerHeight)}else{r.height(i.containerHeight)}r.css("left",q).next().width(g-s).css({left:q,paddingLeft:i.headerWidth});i.enumerateSlides&&r.append("<b>"+(o+1)+"</b>")})},bindEvents:function(n){if(i.activateOn==="click"){if(n===undefined){k.on("click.liteAccordion",d.triggerSlide)}else{k.eq(n).on("click.liteAccordion",d.triggerSlide).removeClass("disabled")}}else{if(i.activateOn==="mouseover"){if(n===undefined){k.on("click.liteAccordion mouseover.liteAccordion",d.triggerSlide)}else{k.eq(n).on("click.liteAccordion mouseover.liteAccordion",d.triggerSlide).removeClass("disabled")}}}if(i.useIE8Images&&f&&n!==undefined){k.eq(n).children("img").attr("src",i.imagePath+"/"+i.imagePrefix+n+"."+i.imageType)}if(n===undefined){if(i.linkable){b(window).on("hashchange.liteAccordion",function(p){var o=c.filter(function(){return b(this).attr("data-slide-name")===window.location.hash.split("#")[1]});if(o.length){d.triggerSlide.call(o.children(i.headerSelector)[0],p)}})}if(i.pauseOnHover&&i.autoPlay){h.on("mouseover.liteAccordion",function(){d.playing&&e.stop()}).on("mouseout.liteAccordion",function(){!d.playing&&e.play(d.currentSlide)})}}},unbindEvents:function(n){if(i.activateOn==="click"){k.eq(n).off("click.liteAccordion").addClass("disabled")}else{if(i.activateOn==="mouseover"){k.eq(n).off("click.liteAccordion mouseover.liteAccordion").addClass("disabled")}}if(i.useIE8Images&&f){k.eq(n).children("img").attr("src",i.imagePath+"/"+i.imagePrefix+n+"_disabled."+i.imageType)}},replaceHeaders:function(){var n=i.imageAlts.length;k.empty().each(function(p){var o=b("<img>").attr({src:i.imagePath+"/"+i.imagePrefix+p+"."+i.imageType,height:i.containerHeight,width:i.headerWidth,alt:p<n?i.imageAlts[p]:""});b(this).append(o)})},currentSlide:i.firstSlide-1,nextSlide:function(n){var o=n+1||d.currentSlide+1;return function(){return o++%l}},playing:0,slideAnimCompleteFlag:false,triggerSlide:function(p){var o=b(this),n={elem:o,index:k.index(o),next:o.next(),prev:o.parent().prev().children(i.headerSelector),parent:o.parent()};if(i.linkable&&n.parent.attr("data-slide-name")){if(n.parent.attr("data-slide-name")!==window.location.hash.split("#")[1]){return window.location.hash="#"+n.parent.attr("data-slide-name")}}d.currentSlide=n.index;d.slideAnimCompleteFlag=false;i.onTriggerSlide.call(n.next,o);if(o.hasClass("selected")&&o.position().left<g/2){d.animSlide.call(n)}else{d.animSlideGroup(n)}if(i.autoPlay){e.stop();e.play(k.index(k.filter(".selected")))}},animSlide:function(n){var o=this;if(typeof this.pos==="undefined"){this.pos=g}k.removeClass("selected").filter(this.elem).addClass("selected");if(!!this.index){this.elem.add(this.next).stop(true).animate({left:this.pos+this.index*i.headerWidth},i.slideSpeed,i.easing,function(){if(!d.slideAnimCompleteFlag){i.onSlideAnimComplete.call(n?n.next:o.prev.next());d.slideAnimCompleteFlag=true}});k.removeClass("selected").filter(this.prev).addClass("selected")}},animSlideGroup:function(n){var o=["left","right"];b.each(o,function(p,q){var s,r;if(q==="left"){s=":lt("+(n.index+1)+")";r=0}else{s=":gt("+n.index+")";r=g}c.filter(s).children(i.headerSelector).each(function(){var u=b(this),t={elem:u,index:k.index(u),next:u.next(),prev:u.parent().prev().children(i.headerSelector),pos:r};d.animSlide.call(t,n)})});k.removeClass("selected").filter(n.elem).addClass("selected")},ieClass:function(n){if(n<7){e.destroy()}if(n>=10){return}if(n===7||n===8){c.each(function(o){b(this).addClass("slide-"+o)})}if(n===8){f=true}h.addClass("ie ie"+n)},init:function(){var o=navigator.userAgent,n=o.indexOf("MSIE");if(n!==-1){o=o.slice(n+5,n+7);d.ieClass(+o)}d.setStyles();d.bindEvents();if(i.useIE8Images&&f){if(i.imagePath===undefined){throw new Error("liteAccordion: useIE8Images set to true, but imagePath is not defined")}if(i.imagePrefix===undefined){throw new Error("liteAccordion: useIE8Images set to true, but imagePrefix is not defined")}if(i.imageType===undefined){throw new Error("liteAccordion: useIE8Images set to true, but imageType is not defined")}d.replaceHeaders()}if(i.cycleSpeed<i.slideSpeed){i.cycleSpeed=i.slideSpeed}i.autoPlay&&e.play()}};d.init();return e};b.fn.liteAccordion=function(f,e){var d=this,c=d.data("liteAccordion");if(typeof f==="object"||!f){return d.each(function(){var g;if(c){return}g=new a(d,f);d.data("liteAccordion",g)})}else{if(typeof f==="string"&&c[f]){if(f==="debug"){return c[f].call(d)}else{c[f].call(d,e);return d}}}}})(jQuery);